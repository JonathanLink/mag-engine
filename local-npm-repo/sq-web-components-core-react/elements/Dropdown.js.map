{"version":3,"sources":["elements/Dropdown.tsx"],"names":[],"mappings":"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","file":"Dropdown.js","sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Manager, Popper, Target, IPopperProps } from \"react-popper\";\nimport Portal from \"react-travel\";\n\nimport clickOutside from \"../utils/clickOutside\";\nimport NamespaceWrapper, {\n  NamespaceWrapperProps\n} from \"../utils/NamespaceWrapper\";\nimport { isIE9OrBelow, isRTL } from \"../utils\";\n\nexport interface DropdownProps extends NamespaceWrapperProps {\n  disabled?: boolean;\n  up?: boolean;\n  open?: boolean;\n  block?: boolean;\n  size?: \"small\" | \"medium\" | \"large\";\n  className?: string;\n  trigger:\n    | ((isOpen: boolean, caret: React.ReactNode) => React.ReactNode)\n    | React.ReactNode;\n\n  style?: React.CSSProperties;\n}\n\nexport interface DropdownState {\n  open?: boolean;\n}\n\nexport default class Dropdown extends NamespaceWrapper<\n  DropdownProps,\n  DropdownState\n> {\n  outsideTap;\n  manager: Element;\n  popper: Element;\n  target: Element;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: !!props.open || false\n    };\n  }\n\n  componentDidMount() {\n    this.setOusideTap();\n  }\n\n  componentDidUpdate(lastProps, lastState) {\n    if (lastState.open !== this.state.open) {\n      setTimeout(() => this.setOusideTap());\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.open != nextProps.open) {\n      this.setState(() => ({open: !!nextProps.open}));\n    }\n  }\n\n  componentWillUnmount() {\n    this.outsideTap.remove();\n  }\n\n  private setOusideTap = () => {\n    const elements = [this.target];\n\n    if (this.popper) {\n      elements.push(this.popper);\n    }\n\n    if (this.outsideTap) {\n      this.outsideTap.remove();\n    }\n\n    this.outsideTap = clickOutside(\n      elements,\n      [\"click\", \"touchstart\"],\n      this.handleOutsideTap\n    );\n  }\n\n  handleOutsideTap = () => {\n    this.setState({ open: false });\n  }\n\n  handleClick = event => {\n    if (this.props.open && this.state.open) {\n      return;\n    }\n\n    this.setState(oldState => ({\n      open: !oldState.open\n    }));\n    event.preventDefault();\n  }\n\n  renderTrigger() {\n    if (typeof this.props.trigger === \"function\") {\n      return this.props.trigger(\n        this.state.open,\n        <span className={this.classes(\"Caret\")} />\n      );\n    }\n\n    return this.props.trigger;\n  }\n\n  getPlacement(\n    up: boolean\n  ): \"top-end\" | \"bottom-end\" | \"top-start\" | \"bottom-start\" {\n    if (this.manager && isRTL(this.manager)) {\n      return up ? \"top-end\" : \"bottom-end\";\n    } else {\n      return up ? \"top-start\" : \"bottom-start\";\n    }\n  }\n\n  render() {\n    const {\n      namespace,\n      disabled,\n      open,\n      size,\n      up,\n      trigger,\n      children,\n      className,\n      block,\n      ...props\n    } = this.props;\n\n    const classes = this.classes(\n      \"Dropdown\",\n      disabled && \"is-disabled\",\n      this.state.open && \"is-open\",\n      size && \"Dropdown--\" + size,\n      up && \"Dropdown--dropup\",\n      block && \"Dropdown--block\",\n      isIE9OrBelow() && \"Dropdown--legacy\",\n      className\n    );\n\n    let ManagerComponent = isIE9OrBelow() ? \"div\" : Manager;\n    let TargetComponent = isIE9OrBelow() ? \"div\" : Target;\n    let targetProps: {innerRef?: (element) => void, ref?: (element) => void} = {innerRef: c => (this.target = ReactDOM.findDOMNode(c))};\n\n    if (isIE9OrBelow()) {\n      targetProps.ref = targetProps.innerRef;\n      delete targetProps.innerRef;\n    }\n\n    // TODO :: report \"block\" and \"size\" to the child popper automatically\n\n    return (\n      <ManagerComponent\n        className={classes}\n        tabIndex={0}\n        ref={manager => (this.manager = ReactDOM.findDOMNode(manager))}\n        {...props}\n      >\n        <TargetComponent\n          className={this.classes(\"Dropdown__trigger\")}\n          onClick={this.handleClick}\n          {...targetProps}\n        >\n          {this.renderTrigger()}\n        </TargetComponent>\n\n        {this.renderPopper(children, up)}\n      </ManagerComponent>\n    );\n  }\n\n  renderPopper(children, up) {\n    if (!this.state.open) {\n      return;\n    }\n\n    if (isIE9OrBelow()) {\n      return (\n        <div\n          className={this.classes(\"Dropdown__popper\")}\n          ref={c => (this.popper = c)}\n        >\n          {children}\n        </div>\n      );\n    }\n\n    return (\n      <Portal>\n        <Popper\n          className={this.classes(\"Dropdown__popper\")}\n          placement={this.getPlacement(up)}\n          innerRef={c => {\n            this.popper = ReactDOM.findDOMNode(c);\n          }}\n        >\n          {children}\n        </Popper>\n      </Portal>\n    );\n  }\n}\n"]}