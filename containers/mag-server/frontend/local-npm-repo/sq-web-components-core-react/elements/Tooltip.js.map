{"version":3,"sources":["elements/Tooltip.tsx"],"names":[],"mappings":"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","file":"Tooltip.js","sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport * as PropTypes from \"prop-types\";\nimport { Arrow, Manager, Popper, Target } from \"react-popper\";\nimport Portal from \"react-travel\";\nimport { isIE9OrBelow } from \"../utils\";\nimport { getCSSAttrNumeric, getOffset, getScrollTop,\n  setOffset, getComputedStyle } from \"../domUtils\";\nimport NamespaceWrapper, { NamespaceWrapperProps } from \"../utils/NamespaceWrapper\";\n\nexport interface TooltipProps extends NamespaceWrapperProps {\n\n  /**\n   * The content of the tooltip\n   */\n  title: React.ReactNode;\n\n  /**\n   * Add a class name to the tooltip\n   */\n  className ?: string;\n\n  /**\n   * Position of tooltip\n   * Can be bottom, top, right, left\n   */\n  placement ?: \"bottom\" | \"top\" | \"right\" | \"left\";\n\n  /**\n   * Is the tooltip visible by default\n   */\n  visible ?: boolean;\n\n  /**\n   * Hover\n   */\n  trigger ?: \"hover\" | \"click\";\n}\n\nexport interface TooltipState {\n  shouldShow?: boolean;\n}\n\nexport default class Tooltip extends NamespaceWrapper<TooltipProps, TooltipState> {\n  static propTypes = {\n    placement: PropTypes.oneOf([\"bottom\", \"top\", \"right\", \"left\"]),\n    title: PropTypes.node.isRequired,\n    visible: PropTypes.bool,\n    className: PropTypes.string,\n    trigger: PropTypes.oneOf([\"hover\", \"click\"])\n  };\n\n  static defaultProps = {\n    placement: \"top\",\n    className: \"tooltip\",\n    trigger: \"hover\"\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      shouldShow: false,\n    };\n  }\n\n  getActionProps() {\n    if (this.props.visible != null) {\n      return {};\n    }\n\n    if (this.props.trigger === \"click\") {\n      return {\n        onClick: () => this.setState({shouldShow: !this.state.shouldShow})\n      };\n    }\n\n    return {\n      onMouseOver: () => this.setState({shouldShow: true}),\n      onMouseOut: () => this.setState({shouldShow: false})\n    };\n  }\n\n  getPosition(el) {\n    let isBody = el.tagName === \"BODY\";\n    let {bottom, height, left, right, top, width} = el.getBoundingClientRect();\n    if (width == null) {\n      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\n      width = right - left;\n      height = bottom - top;\n    }\n\n    if (isBody) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    }\n\n    if (isBody) {\n      top = 0;\n      left = 0;\n    } else {\n      const offset = getOffset(el);\n      top = offset.top;\n      left = offset.left;\n    }\n\n    return {\n      width, height, top, left,\n      scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : getScrollTop(el)\n    };\n  }\n\n  getCalculatedOffset(placement, pos, actualWidth, actualHeight) {\n    return {\n      left: pos.left + pos.width / 2 - actualWidth / 2,\n      top: placement === \"bottom\" ? pos.top + pos.height : pos.top - actualHeight\n    };\n  }\n\n  placeTooltip(tooltipNode, reference) {\n    // Only support bottom and top on old IE\n    const placement = this.props.placement === \"bottom\" ? \"bottom\" : \"top\";\n    tooltipNode.setAttribute(\"data-placement\", placement);\n\n    let pos = this.getPosition(reference);\n    let actualWidth = tooltipNode.offsetWidth;\n    let actualHeight = tooltipNode.offsetHeight;\n    let height = actualHeight;\n\n    let offset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight);\n\n    const computed = getComputedStyle(tooltipNode);\n    offset.top += getCSSAttrNumeric(computed, \"marginTop\");\n    offset.left += getCSSAttrNumeric(computed, \"marginLeft\");\n\n    setOffset(tooltipNode, offset);\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    actualHeight = tooltipNode.offsetHeight;\n    if (placement === \"top\" && actualHeight !== height) {\n      offset.top = offset.top + height - actualHeight;\n      setOffset(tooltipNode, offset);\n    }\n\n    // place arrow\n    const arrow = ReactDOM.findDOMNode(this.refs[\"arrow\"]) as HTMLElement;\n    arrow.style.left = \"\" + Math.floor(actualWidth / 2 - arrow.offsetWidth / 2);\n  }\n\n  componentDidUpdate() {\n    if (this.isVisible() && isIE9OrBelow() && this.refs[\"popper\"]) {\n      this.placeTooltip(ReactDOM.findDOMNode(this.refs[\"popper\"]), ReactDOM.findDOMNode(this.refs[\"content\"]));\n    }\n  }\n\n  componentDidMount() {\n    if (this.isVisible() && isIE9OrBelow() && this.refs[\"popper\"]) {\n      this.placeTooltip(ReactDOM.findDOMNode(this.refs[\"popper\"]), ReactDOM.findDOMNode(this.refs[\"content\"]));\n    }\n  }\n\n  renderTooltip(className, props, title) {\n    let PopperComponent: any = Popper;\n    let arrow: any = <Arrow>\n      {({arrowProps}) => <span className={this.classes(\"Tooltip__arrow\")} {...arrowProps} />}\n    </Arrow>;\n\n    if (isIE9OrBelow()) {\n      PopperComponent = \"div\";\n      arrow = <span ref=\"arrow\" className={this.classes(\"Tooltip__arrow\")} />;\n      // only accept bottom and top in IE\n      props.placement = props.placement === \"bottom\" ? \"bottom\" : \"top\";\n      props[\"data-placement\"] = props.placement;\n      props[\"ref\"] = \"popper\";\n    }\n\n    const content = (\n      <PopperComponent role=\"tooltip\" className={this.classes(\"Tooltip\", className)} {...props}>\n        <div className={this.classes(\"Tooltip__inner\")}>{title}</div>\n        {arrow}\n      </PopperComponent>\n    );\n\n    return isIE9OrBelow() ? content : <Portal>{content}</Portal>;\n  }\n\n  isVisible() {\n    return this.props.visible === true || this.state.shouldShow;\n  }\n\n  render() {\n    const {children, visible, title, className, trigger, ...props} = this.props;\n\n    const moreProps = {};\n    let ManagerComponent: any = Manager;\n    let TargetComponent: any = Target;\n    if (isIE9OrBelow()) {\n      ManagerComponent = \"span\";\n      TargetComponent = \"span\";\n      moreProps[\"ref\"] = \"content\";\n    }\n\n    return (\n      <ManagerComponent component=\"span\" style={{display: \"inline-block\"}} {...moreProps}>\n        <TargetComponent component=\"span\"\n                         style={{display: \"inline-block\"}} {...this.getActionProps()}>\n          {children}\n        </TargetComponent>\n        {this.isVisible() && this.renderTooltip(className, props, title)}\n      </ManagerComponent>\n    );\n  }\n}\n"]}