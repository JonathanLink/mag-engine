{"version":3,"sources":["collections/MenuItem.tsx"],"names":[],"mappings":"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","file":"MenuItem.js","sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport NamespaceWrapper, { NamespaceWrapperProps } from \"../utils/NamespaceWrapper\";\n\nexport interface MenuItemProps extends React.LiHTMLAttributes<HTMLLIElement>, NamespaceWrapperProps {\n  submenu?: boolean;\n  hoverable?: boolean;\n  open?: boolean;\n  disabled?: boolean;\n}\n\nexport interface MenuItemState {\n  open?: boolean;\n}\n\nexport default class MenuItem extends NamespaceWrapper<MenuItemProps, MenuItemState> {\n  leaveTimeout;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: props.open || false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickOutside, true);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickOutside, true);\n  }\n\n  ignoreEvents() {\n    return this.props.open || this.props.disabled || !this.props.submenu;\n  }\n\n  handleClickOutside = (e) => {\n    if (this.ignoreEvents()) {\n      return;\n    }\n\n    const el = ReactDOM.findDOMNode(this.refs[\"container\"]);\n    if (!el.contains(e.target)) {\n      this.setState({open: false});\n    }\n  }\n\n  handleEnter = () => {\n    if (this.ignoreEvents()) {\n      return;\n    }\n\n    if (this.leaveTimeout) {\n      clearTimeout(this.leaveTimeout);\n    }\n\n    this.setState({\n      open: true\n    });\n  }\n\n  handleLeave = () => {\n    if (this.ignoreEvents()) {\n      return;\n    }\n\n    // As there is a space between elements\n    // we don't want to close the menu instantly\n    this.leaveTimeout = setTimeout(() => {\n      this.setState({\n        open: false\n      });\n    }, 200);\n  }\n\n  handleClick = (e) => {\n    if (this.ignoreEvents()) {\n      return;\n    }\n\n    //Ignore if it comes from an inner menu\n    const el = ReactDOM.findDOMNode(this.refs[\"container\"]);\n    for (let i = 0; i < el.children.length; i++) {\n      if (el.children[i].className.match(/(^| )Menu( |$)/) && el.children[i].contains(e.target)) {\n        return;\n      }\n    }\n\n    this.setState((state) => ({\n      open: !state.open\n    }));\n\n    e.stopPropagation();\n  }\n\n  getEvents() {\n    if (this.props.hoverable) {\n      return {\n        onMouseEnter: this.handleEnter,\n        onMouseLeave: this.handleLeave\n      };\n    }\n\n    return {\n      onClick: this.handleClick\n    };\n  }\n\n  render() {\n    const {namespace, className, submenu, children, hoverable, open, disabled, ...props} = this.props;\n    const classes = this.classes(\"Menu__item\", (submenu ? \"has-submenu \" : \"\"), this.state.open && \"is-open\", className);\n\n    return (\n      <li ref=\"container\" {...props} {...this.getEvents()} className={classes}>\n        {children}{submenu && <span className={this.classes(\"Caret\")} />}\n      </li>\n    );\n  }\n}\n"]}